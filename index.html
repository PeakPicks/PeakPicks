<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PeakPick - Find The Trendiest Products</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://placehold.co/1200x600/1a202c/ffffff?text=PeakPick');
            background-size: cover;
            background-position: center;
        }
        .nav-link.active {
            color: #3b82f6;
            font-weight: 600;
        }
        .filter-btn.active {
            background-color: #3b82f6;
            color: white;
        }
        .testimonial-card {
            min-width: 100%;
            transition: transform 0.5s ease-in-out;
        }
        /* Simple toast notification style */
        #toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2c3e50;
            color: white;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s, bottom 0.3s;
        }
        #toast.show {
            opacity: 1;
            bottom: 30px;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" onclick="showPage('page-home')" class="text-2xl font-bold text-gray-800">PeakPick</a>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" onclick="showPage('page-home')" class="nav-link active">Home</a>
                <a href="#" onclick="showPage('page-products')" class="nav-link">Products</a>
                <a href="#" onclick="showPage('page-about')" class="nav-link">About</a>
                <a href="#" onclick="showPage('page-contact')" class="nav-link">Contact</a>
                <a href="#" onclick="showPage('page-cart')" class="nav-link relative">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cart-item-count" class="absolute -top-2 -right-3 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </a>
            </div>
            <div class="md:hidden flex items-center">
                 <a href="#" onclick="showPage('page-cart')" class="nav-link relative mr-4">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cart-item-count-mobile" class="absolute -top-2 -right-3 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </a>
                <button id="menu-btn" class="text-gray-600 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden">
            <a href="#" onclick="showPage('page-home')" class="nav-link-mobile block px-6 py-2">Home</a>
            <a href="#" onclick="showPage('page-products')" class="nav-link-mobile block px-6 py-2">Products</a>
            <a href="#" onclick="showPage('page-about')" class="nav-link-mobile block px-6 py-2">About</a>
            <a href="#" onclick="showPage('page-contact')" class="nav-link-mobile block px-6 py-2">Contact</a>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Home Page -->
        <section id="page-home" class="page">
            <div class="hero-section text-white h-[60vh] flex items-center">
                <div class="container mx-auto px-6 text-center">
                    <h1 class="text-4xl md:text-6xl font-bold mb-4">Discover What's Trending</h1>
                    <p class="text-lg md:text-xl mb-8">Your one-stop shop for the most viral and sought-after products.</p>
                    <a href="#" onclick="showPage('page-products')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full transition duration-300">Shop All Products</a>
                </div>
            </div>
            <div class="bg-white">
                <div class="container mx-auto px-6 py-20 text-center">
                    <h2 class="text-3xl font-bold mb-4">Welcome to PeakPick</h2>
                    <p class="text-gray-600 max-w-3xl mx-auto">We're your ultimate destination for discovering the coolest and most popular products on the internet. We do the searching so you can do the shopping. From clever gadgets to must-have accessories, if it's trending, you'll find it here at a great price.</p>
                </div>
            </div>
             <!-- Deal of the Day Section -->
            <div class="py-20 bg-gray-200">
                <div class="container mx-auto px-6">
                    <h2 class="text-3xl font-bold text-center mb-12">Deal of the Day</h2>
                    <div id="deal-of-the-day" class="bg-white p-8 rounded-lg shadow-xl flex flex-col md:flex-row items-center gap-8">
                        <!-- Dynamic content here -->
                    </div>
                </div>
            </div>
            <!-- Testimonials Section -->
            <div class="py-20">
                <div class="container mx-auto px-6">
                    <h2 class="text-3xl font-bold text-center mb-12">What Our Customers Say</h2>
                    <div class="relative max-w-3xl mx-auto">
                        <div class="overflow-hidden">
                            <div id="testimonial-carousel" class="flex transition-transform duration-500 ease-in-out">
                                <!-- Testimonials will be dynamically inserted here -->
                            </div>
                        </div>
                        <button id="prev-testimonial" class="absolute top-1/2 left-0 transform -translate-y-1/2 -translate-x-12 bg-white bg-opacity-70 hover:bg-opacity-100 rounded-full p-2 shadow-md"><i class="fas fa-chevron-left"></i></button>
                        <button id="next-testimonial" class="absolute top-1/2 right-0 transform -translate-y-1/2 translate-x-12 bg-white bg-opacity-70 hover:bg-opacity-100 rounded-full p-2 shadow-md"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
            <!-- Newsletter Signup -->
            <section class="bg-blue-500 text-white">
                <div class="container mx-auto px-6 py-16 text-center">
                    <h2 class="text-3xl font-bold mb-4">Stay in the Loop!</h2>
                    <p class="mb-8 max-w-lg mx-auto">Join our newsletter to get the latest trends, new arrivals, and exclusive deals delivered straight to your inbox.</p>
                    <form class="flex flex-col md:flex-row justify-center items-center max-w-md mx-auto gap-2">
                        <input type="email" placeholder="Enter your email" class="w-full px-4 py-3 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300">
                        <button type="submit" class="w-full md:w-auto bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg transition duration-300">Subscribe</button>
                    </form>
                </div>
            </section>
        </section>

        <!-- Products Page -->
        <section id="page-products" class="page hidden py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-8">Our Viral Products</h2>
                <div class="flex justify-center flex-wrap gap-2 mb-12">
                    <button class="filter-btn active" onclick="filterProducts('all')">All</button>
                    <button class="filter-btn" onclick="filterProducts('clothing')">Clothing</button>
                    <button class="filter-btn" onclick="filterProducts('home')">Home Accessories</button>
                    <button class="filter-btn" onclick="filterProducts('personal')">Personal Accessories</button>
                    <button class="filter-btn" onclick="filterProducts('shoes')">Shoes</button>
                </div>
                <div id="product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"></div>
            </div>
        </section>

        <!-- Product Detail Page -->
        <section id="page-product-detail" class="page hidden py-20"></section>
        
        <!-- Shopping Cart Page -->
        <section id="page-cart" class="page hidden py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-12">Your Shopping Cart</h2>
                <div id="cart-content" class="bg-white p-8 rounded-lg shadow-lg">
                    <!-- Dynamic cart content here -->
                </div>
            </div>
        </section>

        <!-- About Page -->
        <section id="page-about" class="page hidden bg-white py-20">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold mb-4">About PeakPick</h2>
                <p class="text-gray-600 max-w-2xl mx-auto mb-12">At PeakPick, we're obsessed with finding the next big thing...</p>
                <h3 class="text-2xl font-bold mb-8">Meet The Team</h3>
                <div class="flex justify-center">
                    <div class="flex flex-col items-center">
                        <img src="https://placehold.co/200x200/a0aec0/ffffff?text=Founder" class="w-32 h-32 rounded-full mb-4 shadow-md">
                        <h4 class="font-bold text-lg">Aahil Sobhan</h4>
                        <p class="text-gray-500">Founder & Head of Everything</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Page -->
        <section id="page-contact" class="page hidden py-20"></section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white pt-12 pb-8">
        <div class="container mx-auto px-6">
            <div class="flex flex-wrap justify-center items-center gap-8 md:gap-12 mb-10 text-center">
                <div class="flex items-center space-x-3"><i class="fas fa-shield-halved text-3xl text-blue-400"></i><div><h4 class="font-bold">Secure Payments</h4><p class="text-sm text-gray-400">100% Secure Checkout</p></div></div>
                <div class="flex items-center space-x-3"><i class="fas fa-undo text-3xl text-blue-400"></i><div><h4 class="font-bold">Money-Back Guarantee</h4><p class="text-sm text-gray-400">30-Day Return Policy</p></div></div>
                <div class="flex items-center space-x-3"><i class="fas fa-truck-fast text-3xl text-blue-400"></i><div><h4 class="font-bold">Fast Shipping</h4><p class="text-sm text-gray-400">On All Orders</p></div></div>
            </div>
            <div class="border-t border-gray-700 pt-8 text-center">
                <p>&copy; 2025 PeakPick. All Rights Reserved.</p>
                <div class="flex justify-center space-x-4 mt-4"><a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a><a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a><a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a></div>
            </div>
        </div>
    </footer>
    
    <!-- Toast Notification -->
    <div id="toast">Item added to cart!</div>

    <script>
        // --- DATA ---
        const products = [
             { id: 1, name: "Vintage Graphic Tee", price: "22.50", category: "clothing", img: "https://placehold.co/600x400/7d3c98/ffffff?text=Graphic+Tee", description: "A super soft, 100% cotton tee with a retro-inspired design. Perfect for a casual, stylish look.", features: ["100% Cotton", "Retro design", "Unisex fit"] },
             { id: 2, name: "Oversized Hoodie", price: "45.00", category: "clothing", img: "https://placehold.co/600x400/7d3c98/ffffff?text=Hoodie", description: "The ultimate comfort piece. This oversized hoodie features a fleece-lined interior and a convenient kangaroo pocket.", features: ["Fleece-lined", "Dropped shoulders", "Ultimate comfort"] },
             { id: 3, name: "High-Waisted Jeans", price: "49.99", category: "clothing", img: "https://placehold.co/600x400/7d3c98/ffffff?text=Jeans", description: "Classic high-waisted, straight-leg jeans made from rigid denim for a timeless look.", features: ["Rigid denim", "5-pocket style", "Straight leg"] },
             { id: 4, name: "Cargo Pants", price: "42.00", category: "clothing", img: "https://placehold.co/600x400/7d3c98/ffffff?text=Cargo+Pants", description: "Y2K is back with these versatile and comfortable cargo pants, featuring multiple pockets.", features: ["Durable twill", "Multiple pockets", "Relaxed fit"] },
             { id: 5, name: "Knit Sweater Vest", price: "28.00", category: "clothing", img: "https://placehold.co/600x400/7d3c98/ffffff?text=Sweater+Vest", description: "A trendy knit sweater vest perfect for layering over shirts or wearing on its own.", features: ["Soft knit blend", "V-neck design", "Slightly cropped"] },
             { id: 16, name: "Sunset Projection Lamp", price: "25.00", category: "home", img: "https://placehold.co/600x400/f39c12/ffffff?text=Sunset+Lamp", description: "Transform your room's ambiance with this stunning sunset projection lamp. Features multiple color filters and a 180-degree rotating head.", features: ["4 color filters", "180° rotation", "USB powered"] },
             { id: 17, name: "Mushroom-Shaped Lamp", price: "30.00", category: "home", img: "https://placehold.co/600x400/f39c12/ffffff?text=Mushroom+Lamp", description: "A charming, Murano-style glass lamp that provides a soft, warm glow. A perfect accent piece.", features: ["Hand-blown style glass", "Warm ambient light", "Compact size"] },
             { id: 18, name: "Twisted Spiral Candles", price: "14.99", category: "home", img: "https://placehold.co/600x400/f39c12/ffffff?text=Spiral+Candles", description: "Add a touch of modern art to your space with these unique, unscented twisted spiral candles.", features: ["Set of 2", "Unscented wax", "Aesthetic design"] },
             { id: 19, name: "Checkered Throw Blanket", price: "45.00", category: "home", img: "https://placehold.co/600x400/f39c12/ffffff?text=Throw+Blanket", description: "A soft, knit throw blanket with a trendy checkered pattern to elevate your living space.", features: ["Soft acrylic knit", "Large size (50x60 in)", "Machine washable"] },
             { id: 20, name: "Wavy Decorative Mirror", price: "38.00", category: "home", img: "https://placehold.co/600x400/f39c12/ffffff?text=Wavy+Mirror", description: "A fun, frameless mirror with a unique wavy edge. Perfect for vanities or as a wall accent.", features: ["Acrylic mirror", "Includes stand", "Lightweight design"] },
             { id: 31, name: "Claw Hair Clips (Set of 4)", price: "13.99", category: "personal", img: "https://placehold.co/600x400/e74c3c/ffffff?text=Claw+Clips", description: "Effortlessly style your hair with this set of 4 large claw clips. The matte finish and strong hold are perfect for all hair types.", features: ["Matte finish", "Strong hold", "Set of 4"] },
             { id: 32, name: "Tote Bag with Pockets", price: "29.99", category: "personal", img: "https://placehold.co/600x400/e74c3c/ffffff?text=Tote+Bag", description: "The perfect everyday tote bag, made from durable canvas with multiple pockets to keep you organized.", features: ["Durable canvas", "Interior/exterior pockets", "Zippered top"] },
             { id: 33, name: "Gold Plated Hoop Earrings", price: "18.00", category: "personal", img: "https://placehold.co/600x400/e74c3c/ffffff?text=Hoop+Earrings", description: "A timeless pair of chunky gold-plated hoop earrings that are lightweight for all-day wear.", features: ["18k gold plating", "Hypoallergenic posts", "Lightweight"] },
             { id: 34, name: "Blue Light Blocking Glasses", price: "21.00", category: "personal", img: "https://placehold.co/600x400/e74c3c/ffffff?text=Blue+Light+Glasses", description: "Protect your eyes during screen time with these stylish and effective blue light blocking glasses.", features: ["Clear, non-prescription lenses", "Reduces eye strain", "Stylish frames"] },
             { id: 35, name: "Mini Belt Bag", price: "22.00", category: "personal", img: "https://placehold.co/600x400/e74c3c/ffffff?text=Belt+Bag", description: "The perfect hands-free bag for running errands or a day out. Can be worn as a fanny pack or crossbody.", features: ["Water-resistant fabric", "Adjustable strap", "Multiple pockets"] },
             { id: 46, name: "Chunky Platform Sneakers", price: "49.99", category: "shoes", img: "https://placehold.co/600x400/27ae60/ffffff?text=Platform+Sneakers", description: "Step up your style game with these retro-inspired chunky platform sneakers. Features a 2-inch platform and a cushioned insole for all-day comfort.", features: ["Faux leather", "2-inch platform", "Cushioned insole"] },
             { id: 47, name: "Cloud-like Slippers", price: "24.99", category: "shoes", img: "https://placehold.co/600x400/27ae60/ffffff?text=Cloud+Slippers", description: "Experience therapeutic comfort with these cloud-like slippers. Made from thick, waterproof EVA foam, they're perfect for indoor and outdoor wear.", features: ["Thick EVA foam", "Waterproof", "Non-slip"] },
             { id: 48, name: "Retro Style Trainers", price: "45.00", category: "shoes", img: "https://placehold.co/600x400/27ae60/ffffff?text=Retro+Trainers", description: "Get that vintage athletic look with these comfortable and stylish retro trainers.", features: ["Suede and nylon upper", "Gum sole", "Padded collar"] },
             { id: 49, name: "Lug Sole Loafers", price: "48.00", category: "shoes", img: "https://placehold.co/600x400/27ae60/ffffff?text=Loafers", description: "A modern take on a classic, these loafers feature a chunky lug sole for an edgy look.", features: ["Faux leather", "Chunky platform sole", "Penny loafer detail"] },
             { id: 50, name: "Braided Strap Sandals", price: "32.00", category: "shoes", img: "https://placehold.co/600x400/27ae60/ffffff?text=Braided+Sandals", description: "Chic and simple, these sandals feature a trendy braided strap and a comfortable flat sole.", features: ["Vegan leather", "Padded footbed", "Slip-on style"] }
        ];
        const testimonials = [
            { name: "Jessica L.", quote: "I'm obsessed with the sunset lamp I bought! It completely changed the vibe of my room. Shipping was super fast too!", img: "https://placehold.co/100x100/e2e8f0/333?text=JL" },
            { name: "Mike R.", quote: "Finally found the perfect pair of chunky sneakers that are actually comfortable. Great quality for the price. 10/10 would recommend.", img: "https://placehold.co/100x100/e2e8f0/333?text=MR" },
            { name: "Chloe T.", quote: "The customer service is amazing. I had a question about my order and they responded within an hour. Love this store!", img: "https://placehold.co/100x100/e2e8f0/333?text=CT" }
        ];

        let cart = JSON.parse(localStorage.getItem('peakPickCart')) || [];

        // --- DOM ELEMENTS ---
        const pageElements = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('.nav-link');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuBtn = document.getElementById('menu-btn');
        const productGrid = document.getElementById('product-grid');
        const productDetailSection = document.getElementById('page-product-detail');
        const cartContent = document.getElementById('cart-content');

        // --- RENDER FUNCTIONS ---
        function renderProducts(productsToRender, container) {
            container.innerHTML = '';
            productsToRender.forEach(product => {
                container.innerHTML += `
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300 group">
                        <div class="relative">
                            <img src="${product.img}" alt="${product.name}" class="w-full h-64 object-cover">
                            <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center gap-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button onclick="showProductDetail(${product.id})" class="text-white bg-gray-700 bg-opacity-80 rounded-full w-12 h-12 flex items-center justify-center hover:bg-opacity-100"><i class="fas fa-eye"></i></button>
                                <button onclick="addToCart(${product.id})" class="text-white bg-blue-500 bg-opacity-80 rounded-full w-12 h-12 flex items-center justify-center hover:bg-opacity-100"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                        <div class="p-6 text-center">
                            <h3 class="text-xl font-bold mb-2">${product.name}</h3>
                            <span class="text-lg font-bold text-blue-500">$${product.price}</span>
                        </div>
                    </div>
                `;
            });
        }

        function renderTestimonials() {
            const carousel = document.getElementById('testimonial-carousel');
            if (!carousel) return;
            carousel.innerHTML = '';
            testimonials.forEach(t => {
                carousel.innerHTML += `
                    <div class="testimonial-card flex-shrink-0 w-full flex flex-col md:flex-row items-center justify-center text-center p-8">
                        <img src="${t.img}" class="rounded-full w-24 h-24 md:mr-8 mb-4 md:mb-0 shadow-md">
                        <div class="max-w-xl">
                            <p class="text-gray-600 italic mb-4">"${t.quote}"</p>
                            <p class="font-bold">- ${t.name}</p>
                        </div>
                    </div>`;
            });
        }
        
        function renderDealOfTheDay() {
            const dealContainer = document.getElementById('deal-of-the-day');
            if (!dealContainer) return;
            const dealProduct = products.find(p => p.id === 46); // Chunky Platform Sneakers
            if (!dealProduct) return;
            dealContainer.innerHTML = `
                <div class="w-full md:w-1/2">
                    <img src="${dealProduct.img}" alt="${dealProduct.name}" class="w-full rounded-lg shadow-lg">
                </div>
                <div class="w-full md:w-1/2 text-center md:text-left">
                    <span class="text-blue-500 font-semibold">LIMITED TIME OFFER</span>
                    <h3 class="text-4xl font-bold my-4">${dealProduct.name}</h3>
                    <p class="text-gray-600 mb-4">${dealProduct.description}</p>
                    <div class="flex items-center justify-center md:justify-start gap-4 mb-6">
                        <span class="text-4xl font-bold text-red-500">$${(parseFloat(dealProduct.price) * 0.8).toFixed(2)}</span>
                        <span class="text-2xl text-gray-400 line-through">$${dealProduct.price}</span>
                    </div>
                    <button onclick="showProductDetail(${dealProduct.id})" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg transition duration-300">Shop Now</button>
                </div>
            `;
        }

        // --- PAGE & FILTER LOGIC ---
        function showPage(pageId) {
            event?.preventDefault();
            pageElements.forEach(page => page.classList.add('hidden'));
            document.getElementById(pageId)?.classList.remove('hidden');
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('onclick').includes(pageId)) {
                    link.classList.add('active');
                }
            });

            mobileMenu.classList.add('hidden');
            window.scrollTo(0, 0);

            if (pageId === 'page-products') filterProducts('all');
            if (pageId === 'page-cart') updateCartDisplay();
        }

        function filterProducts(category) {
            document.querySelectorAll('.filter-btn').forEach(button => {
                button.classList.remove('active');
                if (button.getAttribute('onclick').includes(category)) button.classList.add('active');
            });
            const filtered = category === 'all' ? products : products.filter(p => p.category === category);
            renderProducts(filtered, productGrid);
        }

        function showProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            productDetailSection.innerHTML = `
                <div class="container mx-auto px-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
                        <div><img src="${product.img}" alt="${product.name}" class="w-full rounded-lg shadow-lg"></div>
                        <div>
                            <h2 class="text-4xl font-bold mb-4">${product.name}</h2>
                            <p class="text-gray-600 mb-4">${product.description}</p>
                            <p class="text-3xl text-blue-500 font-bold mb-6">$${product.price}</p>
                            <div class="mb-6"><h4 class="font-semibold text-lg mb-2">Features:</h4><ul class="list-disc list-inside text-gray-600 space-y-1">${product.features.map(f => `<li>${f}</li>`).join('')}</ul></div>
                            <div class="flex items-center gap-4 mb-6"><label for="quantity">Quantity:</label><input id="quantity-${product.id}" type="number" value="1" min="1" class="w-20 border-gray-300 rounded-lg text-center"></div>
                            <button onclick="addToCart(${product.id}, document.getElementById('quantity-${product.id}').value)" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg transition duration-300">Add to Cart</button>
                        </div>
                    </div>
                </div>`;
            showPage('page-product-detail');
        }

        // --- CART LOGIC ---
        function addToCart(productId, quantity = 1) {
            const numQuantity = parseInt(quantity);
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += numQuantity;
            } else {
                cart.push({ id: productId, quantity: numQuantity });
            }
            saveCart();
            showToast("Item added to cart!");
        }

        function updateCartDisplay() {
            if (cart.length === 0) {
                cartContent.innerHTML = `<p class="text-center text-gray-500">Your cart is empty.</p><div class="text-center mt-8"><button onclick="showPage('page-products')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full">Continue Shopping</button></div>`;
                return;
            }
            let cartHTML = `<div class="divide-y divide-gray-200">`;
            let subtotal = 0;
            cart.forEach(item => {
                const product = products.find(p => p.id === item.id);
                if (!product) return;
                const itemTotal = product.price * item.quantity;
                subtotal += itemTotal;
                cartHTML += `
                    <div class="py-4 flex items-center justify-between flex-wrap">
                        <div class="flex items-center gap-4 mb-2 sm:mb-0">
                            <img src="${product.img}" class="w-20 h-20 rounded-lg object-cover">
                            <div>
                                <h4 class="font-bold">${product.name}</h4>
                                <p class="text-gray-500">$${product.price}</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <input type="number" value="${item.quantity}" min="1" onchange="updateCartQuantity(${product.id}, this.value)" class="w-16 border-gray-300 rounded-lg text-center">
                            <p class="font-bold w-20 text-right">$${itemTotal.toFixed(2)}</p>
                            <button onclick="removeFromCart(${product.id})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>`;
            });
            cartHTML += `</div><div class="mt-8 pt-4 border-t text-right"><p class="text-2xl font-bold">Subtotal: $${subtotal.toFixed(2)}</p><button class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg">Proceed to Checkout</button></div>`;
            cartContent.innerHTML = cartHTML;
        }

        function updateCartQuantity(productId, newQuantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = parseInt(newQuantity);
                if (item.quantity <= 0) removeFromCart(productId);
                else {
                    saveCart();
                    updateCartDisplay();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
            updateCartDisplay();
        }

        function saveCart() {
            localStorage.setItem('peakPickCart', JSON.stringify(cart));
            updateCartIcon();
        }

        function updateCartIcon() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-item-count').textContent = totalItems;
            document.getElementById('cart-item-count-mobile').textContent = totalItems;
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderTestimonials();
            renderDealOfTheDay();
            updateCartIcon();
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.add('bg-gray-200', 'hover:bg-gray-300', 'text-gray-800', 'font-bold', 'py-2', 'px-4', 'rounded-full'));
            showPage('page-home');
        });
        
        // --- EVENT LISTENERS ---
        menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
        document.querySelectorAll('.nav-link-mobile').forEach(link => link.addEventListener('click', () => mobileMenu.classList.add('hidden')));

        // Testimonial Carousel Logic
        let testimonialIndex = 0;
        const nextBtn = document.getElementById('next-testimonial');
        const prevBtn = document.getElementById('prev-testimonial');

        if(nextBtn && prevBtn) {
            nextBtn.addEventListener('click', () => {
                const carousel = document.getElementById('testimonial-carousel');
                testimonialIndex = (testimonialIndex + 1) % testimonials.length;
                carousel.style.transform = `translateX(-${testimonialIndex * 100}%)`;
            });
            prevBtn.addEventListener('click', () => {
                const carousel = document.getElementById('testimonial-carousel');
                testimonialIndex = (testimonialIndex - 1 + testimonials.length) % testimonials.length;
                carousel.style.transform = `translateX(-${testimonialIndex * 100}%)`;
            });
        }

    </script>
</body>
</html>

